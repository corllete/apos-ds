!function(t){var e=(window.aposds={fn:{}}).fn.Color=function(t){if("transparent"===t)t=[0,0,0,0];else if("string"==typeof t){var e=t;if(!(t=e.match(/rgba?\(([\d.]+), ([\d.]+), ([\d.]+)(?:, ([\d.]+))?\)/)))throw new Error("Invalid string: "+e);t.shift()}void 0===t[3]&&(t[3]=1),t=t.map((t=>+t)),this.rgba=t};e.prototype={get rgb(){return this.rgba.slice(0,3)},get alpha(){return this.rgba[3]},set alpha(t){this.rgba[3]=t},get luminance(){for(var t=this.rgba.slice(),e=0;e<3;e++){var n=t[e];n=(n/=255)<.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),t[e]=n}return.2126*t[0]+.7152*t[1]+.0722*t[2]},get inverse(){return new e([255-this.rgba[0],255-this.rgba[1],255-this.rgba[2],this.alpha])},toString:function(){return"rgb"+(this.alpha<1?"a":"")+"("+this.rgba.slice(0,this.alpha>=1?3:4).join(", ")+")"},clone:function(){return new e(this.rgba)},overlayOn:function(t){var e=this.clone(),n=this.alpha;if(n>=1)return e;for(var o=0;o<3;o++)e.rgba[o]=e.rgba[o]*n+t.rgba[o]*t.rgba[3]*(1-n);return e.rgba[3]=n+t.rgba[3]*(1-n),e},contrast:function(t){var n=this.alpha;if(n>=1){t.alpha<1&&(t=t.overlayOn(this));var o=this.luminance+.05,r=t.luminance+.05,a=o/r;return r>o&&(a=1/a),{ratio:a,error:0,min:a,max:a}}var i=this.overlayOn(e.BLACK),c=this.overlayOn(e.WHITE),l=i.contrast(t).ratio,s=c.contrast(t).ratio,d=Math.max(l,s),u=this.rgb.map((function(e,o){return Math.min(Math.max(0,(t.rgb[o]-e*n)/(1-n)),255)}));u=new e(u);var f=1;return i.luminance>t.luminance?f=l:c.luminance<t.luminance&&(f=s),{ratio:(f+d)/2,error:(d-f)/2,min:f,max:d,closest:u,farthest:c===d?e.WHITE:e.BLACK}}},e.BLACK=new e([0,0,0]),e.GRAY=new e([127.5,127.5,127.5]),e.WHITE=new e([255,255,255])}(),function(t){const e=t=>{if("r"===t.charAt(0)){const e=t.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);if(!e)return t;const n=(256|e[1]).toString(16).slice(1),o=(256|e[2]).toString(16).slice(1),r=(256|e[3]).toString(16).slice(1);let a=e[4]&&"1"!==e[4]?e[4]:"";return a&&(a=(255*a|256).toString(16).slice(1)),"#"+n+o+r+a}};function n(t,e){return"self"===e?t:e.startsWith("#")?document.querySelector(e):t.querySelector(e)}function o(t,n){Array.prototype.forEach.call(t,(function(t){switch(t.dataset.type){case"font":t.textContent=(n.fontFamily||"").split(",")[0].trim().replace(/'/g,"").replace(/"/g,""),t.title=n.fontFamily||"";break;case"size":t.textContent=n.fontSize;break;case"weight":t.textContent=n.fontWeight;break;case"letter":t.textContent=n.letterSpacing;break;case"line":t.textContent=n.lineHeight;break;case"padding":t.textContent=n.paddingTop+" "+n.paddingRight+" "+n.paddingBottom+" "+n.paddingLeft;break;case"margin":t.textContent=n.marginTop+" "+n.marginRight+" "+n.marginBottom+" "+n.marginLeft;break;case"color":t.textContent=e(n.color);break;case"background":t.textContent=e(n.backgroundColor);break;case"image":t.textContent=n.backgroundImage}}))}function r(t,e,o){const r=document.querySelectorAll(t),a=[],i=[];Array.prototype.forEach.call(r,(function(t,o){const r=t.dataset.target;let c;c=r?n(t,r):t,c&&(a[o]=t.querySelectorAll(e),i[o]=getComputedStyle(c))})),Array.prototype.forEach.call(a,(function(t,e){o(t,i[e])}))}const a=function(){const t=[],e=[];function n(){Array.prototype.forEach.call(t,(function(t){t.handler(null,!0)}))}function o(){Array.prototype.forEach.call(t,(function(t){t.handler(null,!1)}))}function r(){Array.prototype.forEach.call(t,(function(t){t.handler()}))}return{init:function(){const a=document.querySelectorAll(".ds-toggle");Array.prototype.forEach.call(a,(function(e){const n=e.querySelector(".ds-toggle__content"),o=e.querySelector(".ds-toggle__trigger");if(!n||!o)return;const r=function(t,e){return function(n,o,r){n&&n.preventDefault();const a=void 0===o?"none"!==t.style.display:o;let i=a?"none":"block";if(r&&(i=a?"block":"none"),t.style.display=i,e){let t=a?"expand_more":"expand_less";r&&(t=a?"expand_less":"expand_more"),e.textContent=t}}}(n,o.querySelector(".ds-toggle__icon"));t.push({handler:r,trigger:o,type:"click"}),o.addEventListener("click",r),r(null,e.dataset.toggleState?"true"===e.dataset.toggleState:e.dataset.toggleState,!0)}));const i=document.querySelectorAll(".ds-toggle--all");Array.prototype.forEach.call(i,(function(t){let a;switch(t.dataset.action){case"toggle":default:a=r;break;case"show":a=o;break;case"hide":a=n}function i(t){t&&t.preventDefault(),a()}e.push({handler:i,trigger:t,type:"click"}),t.addEventListener("click",i)}))},showAll:o,hideAll:n,toggleAll:r,destroy:function(){Array.prototype.forEach.call(t,(function(t){t.trigger.removeEventListener(t.type,t.handler)})),Array.prototype.forEach.call(e,(function(t){t.trigger.removeEventListener(t.type,t.handler)}))}}}(),i={init:function(){const t=document.querySelectorAll("pre code");Array.prototype.forEach.call(t,(function(t){hljs.highlightBlock(t)}))},destroy:function(){}},c=function(){const e={transparent:"The background is semi-transparent, so the contrast ratio cannot be precise. Depending on what’s going to be underneath, it could be any of the following:",fail:"Fails WCAG 2.0",aal:"Passes AA for large text (above 24px or bold above 18px)",aa:"Passes AA level for any size text and AAA for large text (above 24px or bold above 18px)",aaa:"Passes AAA level for any size text"},a={fail:{range:[0,3],color:"hsl(0, 100%, 40%)",label:"Fail"},aal:{range:[3,4.5],color:"hsl(40, 100%, 45%)",label:"AA(L)"},aa:{range:[4.5,7],color:"hsl(80, 60%, 45%)",label:"AA"},aaa:{range:[7,22],color:"hsl(95, 60%, 41%)",label:"AAA"}};function i(t,e){e=+e||0;const n=Math.pow(10,e);return Math.floor(t*n)/n}function c(t,e){return function(t,e){const n=t.min,o=t.max,r=[];for(const t in e){const a=e[t].range,i=a[0];n<a[1]&&o>=i&&r.push(t)}return{matches:r}}(t.contrast,e)}function l(t,n){Array.prototype.forEach.call(t,(function(t){const o=c(n,a);switch(t.dataset.type){case"crating-label":t.textContent=function(t,e){const n=t.ratio;for(const t in e){const o=e[t].range,r=o[0];if(n<o[1]&&n>=r)return e[t].label}}(n.contrast,a);break;case"crating-ratio":t.textContent=(r=n.contrast,1===(l=o.matches).length?i(r.ratio,2):l.length>1?i(r.ratio,2)+" (±"+i(r.error,2)+")":"");break;case"crating-details":!function(t,n,o){const r=n.matches;if(t.textContent="",1!==r.length){if(r.length){var a=document.createElement("p");a.textContent=o.transparent,t.appendChild(a);for(var i=document.createElement("ul"),c=0;c<r.length;c++){var l=document.createElement("li");l.textContent=o[r[c]],i.appendChild(l)}t.appendChild(i)}}else t.textContent=e[r[0]]}(t,o,e)}var r,l}))}return{init:function(){r(".ds-type--detect",".ds-type--set",o),r(".ds-type--detect-global",".ds-type--set-global",o),function(e,o,r){const i=document.querySelectorAll(".ds-type--detect-crating"),l=[],s=[],d=[];Array.prototype.forEach.call(i,(function(e,o){const r=e.dataset.backgroundTarget,a=e.dataset.foregroundTarget,i=e.dataset.rootTarget;if(!r||!a||!i)return;const c=n(e,i);if(!c)return;l[o]=c;const u=n(c,r),f=n(c,a);if(!u||!f)return;s[o]=c.querySelectorAll(".ds-type--set-crating");const g=new t.fn.Color(getComputedStyle(u).backgroundColor),p=new t.fn.Color(getComputedStyle(f).color),h=g.contrast(p);d[o]={bg:g,fg:p,contrast:h}})),Array.prototype.forEach.call(s,(function(t,e){r(t,d[e]);const n=l[e],o=n.dataset.previewTarget,i=o?n.querySelector(o):null;if(!i)return;const s=c(d[e],a),u=s.matches;1===s.matches.length&&(i.style.backgroundColor=a[u[0]].color)}))}(0,0,l)},destroy:function(){}}}(),l={init:function(){r(".ds-color--detect",".ds-color--set",o)},destroy:function(){}},s=function(){let t;const e=new MutationObserver((function(e,a){for(const a of e){for(const e of a.addedNodes)if(-1!==` ${e.className} `.indexOf(" apos-admin-bar-wrapper ")){t=e,void 0!==window.aposAdminStatus?(n(e),i(window.aposAdminStatus)):o()||(n(e,!0),r());break}if(t)break}t&&a.disconnect()}));function n(t,e=!1){try{const n=t.querySelector(".apos-admin-bar"),o=n.querySelector(".apos-admin-bar__row--utils");e||(o.style.display="none"),n.style.position="static"}catch(t){console.log("Error while fixing Apos admin UI",t)}}function o(){try{return window.self!==window.top}catch(t){return!0}}function r(){t&&(t.style.display="block")}function a(){t&&(t.style.display="none")}function i(t){t?r():a()}return{init:function(){const t=document.querySelector("body");e.observe(t,{attributes:!1,childList:!0,subtree:!1})},destroy:function(){e.disconnect()},show:r,hide:a,set:i}}(),d=function(){function t(t){let e=t;return"string"==typeof e&&(e=document.querySelector(t)),e}function e(e){const n=t(e);n&&(n.style.height=0,n.style.opacity=0)}const n=[];return{init:function(){Array.prototype.forEach.call(document.querySelectorAll(".ds-modal"),(function(t){const o=t.querySelectorAll(".ds-modal__close-button");Array.prototype.forEach.call(o,(function(o){const r=function(t){return function(n){n.preventDefault(),e(t)}}(t);o.addEventListener("click",r),n.push({el:o,fn:r})}))}))},destroy:function(){Array.prototype.forEach.call(n,(function(t){t.el.removeEventListener("click",t.fn)}))},open:function(e,n){const o=t(e);o&&(o.style.height=n||"50vh",o.style.opacity=1)},close:e,toggle:function(e,n){const o=t(e);if(!o)return;const r=+getComputedStyle(o).opacity;o.style.height=r?0:n||"50vh",o.style.opacity=r?0:1}}}(),u={init:function(){},destroy:function(){},openDetails:function(){t.modal.open("#ds-story__details","65vh")},closeDetails:function(){t.modal.close("#ds-story__details")},toggleDetails:function(){t.modal.toggle("#ds-story__details","65vh")}};t.highlight=i,t.toggle=a,t.types=c,t.colors=l,t.toggleAdmin=s,t.modal=d,t.story=u,t.init=function(){t.highlight.init(),t.toggle.init(),t.types.init(),t.colors.init(),t.toggleAdmin.init(),t.modal.init(),t.story.init()},t.destroy=function(){t.highlight.destroy(),t.toggle.destroy(),t.types.destroy(),t.colors.destroy(),t.toggleAdmin.destroy(),t.modal.destroy(),t.story.destroy()},t.reinit=function(){t.destroy(),t.init()}}(window.aposds),window.aposds.init(),document.addEventListener("aposds:destroy",(function(){window.aposds.destroy()})),document.addEventListener("aposds:reinit",(function(){window.aposds.reinit()}));